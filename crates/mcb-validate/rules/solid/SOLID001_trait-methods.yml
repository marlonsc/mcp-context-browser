schema: "rule/v1"
id: "SOLID001"
name: "Single Responsibility - Trait Methods"
category: "solid"
severity: "warning"
enabled: true
engine: "rust-rule-engine"

description: "Trait has too many methods"
rationale: "Traits with many methods violate Interface Segregation Principle"

patterns:
  trait_decl: '(?:pub\s+)?trait\s+([A-Z][a-zA-Z0-9_]*)'
  fn_decl: '(?:async\s+)?fn\s+[a-z_][a-z0-9_]*\s*[<(]'

config:
  max_methods: 10
  exclude_patterns: ["**/tests/**"]

rule: |
  rule TraitMethodsLimit "Check trait method count" {
      when
          AST.Trait(method_count > ${max_methods}) &&
          !TestTrait()
      then
          Violation("Trait has too many methods (${method_count}), max is ${max_methods}");
  }