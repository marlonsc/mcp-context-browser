{% import "icons.html" as icons %}
{% if indexes | length > 0 %}
    {% for index in indexes %}
    <div class="card card-body">
        <div class="flex items-center justify-between mb-4">
            <h3 class="font-medium">{{ index.name }}</h3>
            <span class="badge {{ index.status_class }}">
                {{ index.status_display }}
                {% if index.is_indexing %}<span class="spinner ml-1"></span>{% endif %}
            </span>
        </div>
        <div class="grid grid-cols-3 gap-4 text-center mb-4">
            <div>
                <div class="text-2xl font-bold text-primary">{{ index.document_count_formatted }}</div>
                <div class="text-sm text-muted">Documents</div>
            </div>
            <div>
                <div class="text-2xl font-bold text-success">{{ index.age_display }}</div>
                <div class="text-sm text-muted">Created</div>
            </div>
            <div>
                <div class="text-2xl font-bold text-info">{{ index.id }}</div>
                <div class="text-sm text-muted">Index ID</div>
            </div>
        </div>
        <div class="flex justify-end gap-2">
            <button hx-post="/admin/indexes/{{ index.id }}/operations" hx-vals='{"operation":"status"}' hx-target="#index-status-{{ index.id }}" class="btn btn-secondary btn-sm">Details</button>
            <button hx-post="/admin/indexes/{{ index.id }}/operations" hx-vals='{"operation":"rebuild"}' hx-target="#index-status-{{ index.id }}" class="btn btn-primary btn-sm">Rebuild</button>
            <button hx-post="/admin/indexes/{{ index.id }}/operations" hx-vals='{"operation":"clear"}' hx-target="#index-status-{{ index.id }}" hx-confirm="Clear this index?" class="btn btn-danger btn-sm">Clear</button>
        </div>
        <div id="index-status-{{ index.id }}" class="mt-2 text-sm text-muted"></div>
    </div>
    {% endfor %}
{% else %}
    <div class="empty-state">
        <div class="empty-state-icon">
            {{ icons::icon(name="database", class="icon-xl") }}
        </div>
        <p class="empty-state-title">No indexes created</p>
        <p class="empty-state-text">Get started by indexing a codebase.</p>
    </div>
{% endif %}
