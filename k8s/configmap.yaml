apiVersion: v1
kind: ConfigMap
metadata:
  name: mcp-config
  labels:
    app: mcb
data:
  config.toml: |
    [server]
    host = "0.0.0.0"
    port = 3000

    [metrics]
    port = 3001
    enabled = true

    [cache]
    enabled = true
    default_ttl_seconds = 3600
    max_size = 10000

    [cache.namespaces.embeddings]
    ttl_seconds = 7200
    max_entries = 5000
    compression = true

    [cache.namespaces.search_results]
    ttl_seconds = 1800
    max_entries = 2000
    compression = false

    [cache.namespaces.metadata]
    ttl_seconds = 3600
    max_entries = 1000
    compression = false

    [cache.namespaces.provider_responses]
    ttl_seconds = 300
    max_entries = 3000
    compression = true

    [resource_limits]
    enabled = true

    [resource_limits.memory]
    max_usage_percent = 85.0
    max_per_operation = 536870912  # 512MB
    warning_threshold = 75.0

    [resource_limits.cpu]
    max_usage_percent = 80.0
    max_time_per_operation = 300  # 5 minutes
    warning_threshold = 70.0

    [resource_limits.disk]
    max_usage_percent = 90.0
    min_free_space = 1073741824  # 1GB
    warning_threshold = 80.0

    [resource_limits.operations]
    max_concurrent_indexing = 3
    max_concurrent_search = 10
    max_concurrent_embedding = 5
    max_queue_size = 100

    [auth]
    enabled = true
    jwt_expiration_hours = 24

    [database]
    enabled = true
    max_connections = 20
    min_idle = 5
    connection_timeout_seconds = 30

    [rate_limiting]
    enabled = true
    window_seconds = 60
    max_requests_per_window = 100